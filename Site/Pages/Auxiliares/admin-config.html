<!DOCTYPE html>
<!--[if IE 8]> <html lang="pt-br" class="ie8"> <![endif]-->
<!--[if !IE]><!--> <html lang="pt-br"> <!--<![endif]-->
<head>
    <meta charset="iso-8859-1">
    <title>configura&ccedil;&otilde;es | Construtora Alian&ccedil;a</title>
    <link rel="icon" href="../../../images/logo_mini.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../../custom-font/fonts.css" />
    <link rel="stylesheet" href="../../../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../../../css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
    <link rel="stylesheet" href="../../../css/bootsnav.css">
    <link rel="stylesheet" type="text/css" href="../../../css/jquery.fancybox.css?v=2.1.5" media="screen" />
    <link rel="stylesheet" href="../../../css/custom.css" />
    <style>
        .works-list { list-style:none; padding:6px; margin:8px 0 4px 0; min-height:52px; border:1px dashed transparent; border-radius:12px; }
        .works-list.is-empty { background:#f8f9fb; border-color:#d6dbe8; box-shadow: inset 0 0 0 1px rgba(0,0,0,0.02); }
        .works-list li { border:1px solid #dcdcdc; border-radius:12px; padding:12px 14px; margin-bottom:10px; display:flex; align-items:center; justify-content:space-between; gap:10px; background:linear-gradient(145deg,#ffffff 0%,#f9fbff 100%); cursor:grab; transition:transform 180ms ease, box-shadow 200ms ease, opacity 160ms ease, background-color 160ms ease; box-shadow:0 12px 28px rgba(0,0,0,0.06); user-select:none; }
        .works-list li * { user-select:none; }
        .works-list li .works-thumb { width:50px; height:50px; min-width:50px; min-height:50px; object-fit:cover; border-radius:8px; border:1px solid #e0e0e0; flex-shrink:0; }
        .works-list li:hover { box-shadow:0 14px 32px rgba(0,0,0,0.12); transform:translateY(-2px) scale(1.01); }
        .works-list li.dragging { opacity:0.48; cursor:grabbing; box-shadow:0 16px 36px rgba(0,0,0,0.20); transform:scale(0.985) rotate(-0.3deg); }
        .works-list li.drag-over { box-shadow:0 6px 18px rgba(0,0,0,0.08); background:#ffffff; transform:translateY(1px); }
        .works-list.drag-active li:not(.dragging) { transform:translateY(1px) scale(0.995); box-shadow:0 8px 22px rgba(0,0,0,0.06); filter:saturate(0.95); animation: settlePulse 0.9s ease-in-out infinite alternate; }
        .works-list li .works-actions { display:flex; gap:6px; }
        .works-list li .works-actions button { cursor:pointer; transition:transform 120ms ease, box-shadow 120ms ease, color 140ms ease; }
        .works-list li .works-actions button:active { transform:scale(0.98); }
        .drop-placeholder { border:1px dashed #b8c2d6; border-radius:10px; margin:6px 0 8px; background:linear-gradient(90deg,#f6f8ff,#fdfdff); height:12px; min-height:10px; transition:height 140ms ease, margin 140ms ease, background 140ms ease, box-shadow 140ms ease; box-shadow:0 4px 12px rgba(0,0,0,0.04); animation: pulsePlaceholder 1s ease-in-out infinite alternate; }
        @keyframes pulsePlaceholder { from { opacity:0.7; } to { opacity:1; } }
        @keyframes settlePulse { from { transform:translateY(1px) scale(0.995); } to { transform:translateY(-1px) scale(1); } }
        .drag-ghost { pointer-events:none; opacity:0.95; padding:10px 12px; border:1px solid #ccc; background:#fff; border-radius:6px; box-shadow:0 10px 24px rgba(0,0,0,0.25); position:fixed; z-index:9999; display:flex; justify-content:space-between; align-items:center; gap:8px; width:auto; max-width:none; }
    </style>
</head>
<body>
    <div id="header"></div>

    <main class="admin-setup" style="display:none;" id="adminPage">
        <div class="admin-setup-card" id="twofaGate" style="display:none; width:100%; max-width:980px;">
            <header class="admin-setup-head">
                <div class="icon-wrap"><i class="fa fa-shield-alt"></i></div>
                <div>
                    <h2>Confirmar 2FA</h2>
                    <p>Insira o C&oacute;digo do autenticador para gerenciar configura&ccedil;&otilde;es.</p>
                </div>
            </header>
            <form class="admin-setup-form" id="twofaGateForm">
                <div class="form-group">
                    <label for="twofa-code">C&oacute;digo 2FA</label>
                    <input id="twofa-code" name="twofa" type="text" inputmode="numeric" autocomplete="one-time-code" placeholder="Ex.: 123456">
                </div>
                <div class="admin-setup-actions">
                    <button type="submit" class="btn-primary">Validar</button>
                </div>
                <small id="twofaGateMsg" style="color:var(--red); display:none;">C&oacute;digo inv&aacute;lido, tente novamente.</small>
            </form>
        </div>

        <div class="admin-setup-card" id="adminContent" style="display:none;">
            <header class="admin-setup-head">
                <div class="icon-wrap"><i class="fa fa-cog"></i></div>
                <div>
                    <h2>Configura&ccedil;&otilde;es do Admin</h2>
                    <p>Gerencie autentica&ccedil;&atilde;o e prefer&ecirc;ncias futuras.</p>
                </div>
                <a class="btn-ghost" href="./admin-obra.html" style="margin-left:auto; text-decoration:none; display:inline-flex; align-items:center; gap:8px;">
                    <i class="fa fa-arrow-left"></i><span>Voltar</span>
                </a>
            </header>
            <form class="admin-setup-form twofa-pane" id="twofaForm">
                <div class="twofa-header">
                    <div>
                        <label for="twofa-provider">Tipo de autenticador</label>
                        <select id="twofa-provider" name="provider">
                            <option value="totp" status="">App autenticador (Google Authenticator, Authy, etc.)</option>
                            <option value="email" status="active">C&oacute;digo por e-mail</option>
                        </select>
                    </div>
                    <label class="toggle-2fa">
                        <input id="twofa-enabled" name="enabled" type="checkbox">
                        <span>Habilitar 2FA</span>
                    </label>
                </div>

                <div class="twofa-grid">
                    <div class="twofa-block">
                        <label for="twofa-secret" id="twofa-secret-label">Chave / C&oacute;digo inicial</label>
                        <input id="twofa-secret" name="secret" type="text" placeholder="Ex.: C&oacute;digo do app autenticador" autocomplete="one-time-code">
                        <small id="twofa-secret-help">Use a chave gerada ou um C&oacute;digo &uacute;nico.</small>
                        <button type="button" class="btn-primary ghost" id="generateTotp">Gerar chave do app + QR</button>
                        <div class="qr-wrap" id="qrWrap" style="display:none;">
                            <div id="qrBox"></div>
                            <small id="qrHint">Escaneie no app autenticador.</small>
                        </div>
                        <div class="form-group" id="contactGroup" style="display:none;">
                            <label for="twofa-contact" id="contactLabel">Contato</label>
                            <div class="contact-row">
                                <input id="twofa-contact" name="contact" type="email" placeholder="" autocomplete="email">
                                <button type="button" class="btn-primary ghost" id="contactTestBtn">Mandar teste</button>
                            </div>
                            <small id="contactHelp"></small>
                        </div>
                    </div>
                    <div class="twofa-block">
                        <label for="twofa-current">C&oacute;digo 2FA atual</label>
                        <input id="twofa-current" name="current" type="text" inputmode="numeric" autocomplete="one-time-code" placeholder="C&oacute;digo de 6 digitos">
                        <small>Obrigatorio para alterar/desativar se ja estiver ativo.</small>
                        <div class="admin-setup-actions" style="justify-content: flex-end; margin-top:12px;">
                            <button type="submit" class="btn-primary">Salvar autenticador</button>
                        </div>
                    </div>
                </div>
                <small id="twofaStatus" style="display:block; margin-top:10px;">Use um c&oacute;digo &uacute;nico. Altera&ccedil;&otilde;es exigem o c&oacute;digo atual se o 2FA j&aacute; estiver ativo.</small>
            </form>
            <div class="admin-setup-card" style="margin-top:18px;" id="otherConfigs">
                <header class="admin-setup-head">
                    <div class="icon-wrap"><i class="fa fa-sliders-h"></i></div>
                    <div>
                        <h2>Outras configura&ccedil;&otilde;es</h2>
                        <p>Espa&ccedil;o reservado para prefer&ecirc;ncias futuras do painel.</p>
                    </div>
                </header>
                <p style="margin:0;">Adicione aqui novas op&ccedil;&otilde;es quando o backend estiver pronto.</p>
            </div>

            <div class="admin-setup-card" style="margin-top:18px;" id="worksManager">
                <header class="admin-setup-head">
                    <div class="icon-wrap"><i class="fa fa-folder-open"></i></div>
                    <div>
                        <h2>Gerenciar obras</h2>
                        <p>Reordenar, renomear ou apagar obras por categoria.</p>
                    </div>
                    <button type="button" class="btn-primary ghost" id="loadWorksBtn">Carregar lista</button>
                </header>
                <div id="worksContent">
                    <small>Use o bot&atilde;o acima para carregar as obras.</small>
                </div>
                <small id="worksStatus" style="display:block; margin-top:8px;"></small>
            </div>
        </div>
    </main>

    <div id="footer"></div>

    <script src="../../js/jquery-1.12.1.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/bootsnav.js"></script>
    <script src="../../js/jquery.fancybox.js?v=2.1.5"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="../../js/main.js"></script>
    <script src="../../js/includeHeader.js"></script>
    <script src="../../js/IncludeFooter.js"></script>
    <script src="./admin-config/script.js"></script>
</body>
</html>



